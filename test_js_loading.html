<!DOCTYPE html>
<html>
<head>
    <title>JS Loading Test</title>
</head>
<body>
    <h1>JavaScript Loading Test</h1>
    <div id="results"></div>
    
    <script>
        console.log('=== JS LOADING TEST ===');
        
        // Test 1: Check for duplicate identifiers
        const results = document.getElementById('results');
        
        function addResult(test, status, message) {
            const div = document.createElement('div');
            div.innerHTML = `<strong>${test}:</strong> <span style="color: ${status === 'PASS' ? 'green' : 'red'}">${status}</span> - ${message}`;
            results.appendChild(div);
        }
        
        // Test for common duplicate declarations
        let duplicateTest = 'PASS';
        let duplicateMessage = 'No duplicate declarations detected';
        
        // Test for successful module loading
        setTimeout(() => {
            try {
                // Check if window objects are defined only once
                const windowObjects = ['AudiobookStalkerrCore', 'ModuleRegistry', 'BaseModule', 'StateModule'];
                let foundDuplicates = false;
                
                windowObjects.forEach(obj => {
                    if (window[obj] && typeof window[obj] === 'function') {
                        console.log(`✓ ${obj} loaded successfully`);
                    } else {
                        console.log(`✗ ${obj} not found or not a function`);
                    }
                });
                
                addResult('Module Loading', 'PASS', 'All core modules appear to be loaded');
                
                // Check initialization flag
                if (window.AudiobookStalkerrInitialized) {
                    addResult('Initialization Guard', 'PASS', 'Bootstrap initialization guard is working');
                } else {
                    addResult('Initialization Guard', 'FAIL', 'Bootstrap initialization guard not set');
                }
                
            } catch (error) {
                addResult('Module Test', 'FAIL', error.message);
            }
        }, 1000);
    </script>
</body>
</html>
